<template>
    <template if:true={isLoading}>
        <div>
            <lightning-spinner
                alternative-text="Loading..."
                variant="brand"
                size="large">
            </lightning-spinner>
        </div>
    </template>
    <div class="slds-theme_default">
        <template if:false={isFirst}>
            <div class="slds-p-top_medium slds-p-horizontal_small">
                <c-form-progress-step
                    current-step={selectedStepString}
                    all-steps={steps}
                    onchangestep={handleChangeStep}
                ></c-form-progress-step>
            </div>
        </template>
        
        <div class="slds-p-around_medium">
            <c-progress-report-form-steps
                selected-step-index={selectedStepIndex}
                progress-form={progressForm}
                onformchanged={changeFormHandler}
                onrowaction={handleRowAction}
                onuploadfinished={fileUploadingHandler} 
                is-blocked={isBlocked}
                >
            </c-progress-report-form-steps>
        </div>
        <div class="slds-m-vertical_medium">

            <c-form-footer
                is-first-stage={isFirst}
                is-last-stage={isLast}
                onnext={handleNext}
                onback={handlePrev}
                onsubmit={handleFinish}
                submit-button-name={submitButtonName}
                onsave={handleSave}
                disable-save-button={isBlocked}
                >
                
            </c-form-footer>
        </div>
    </div>
    
    <c-confirmation-dialog
        title={labels.Confirmation_Title}
        message={labels.Do_you_want_to_submit}
        confirm-label={labels.Modal_Yes}
        cancel-label={labels.Modal_No}
        visible={isDialogVisible}
        original-message="test"
        name="confirmModal"
        onclick={handleDialogClick}
    >
    </c-confirmation-dialog>
</template>