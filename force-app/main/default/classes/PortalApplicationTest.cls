/**
* This is a test classcovering the test for portal application 
*/

@isTest
private class PortalApplicationTest {
    
    @isTest static void testCallout() {
        
        String requestBody='{'
            +'"meta": {'
            +'"form": "3-10k-grant",'
            +'"schemaVersion": "v1.x",'
            +'"environment": "production",'
            +'"commitId": "b4ecf18eae01d34b296e9388f387cc42bf7c0f93",'
            +'"locale": "en",'
            +'"username": "example@example.com",'
            +'"applicationId": "9453d770-e450-11e9-b3b6-212ded63c337",'
            +'"startedAt": "2019-05-17T15:34:13.000Z"'
            +'},'
            +'"application": {'
            +'"projectName": "my project",'
            +'"projectDateRange": {'
            +'"startDate": "2020-12-12",'
            +'"endDate": "2020-12-12"'
            +'},'
            +'"projectAddress": {'
            +'"projectPostcode": "B15 1TR",'
            +'"line1": "82553 Demarco Rapid",'
            +'"townCity": "Waelchitown",'
            +'"county": "Berkshire"'
            +'},'
            +'"yourIdeaProject": "Free textâ€¦",'
            +'"projectDifference": "More free text",'
            +'"projectCommunity": "Even more free text",'
            +'"projectOrgBestPlace": "Even more and more free text",'
            +'"projectAvailable": "Even more more more text",'
            +'"projectCapitalWork": true,'
            +'"projectOutcome1": "More and more and more free text",'
            +'"projectOutcome2": "More and more and more free text",'
            +'"projectOutcome2Checked": true,'
            +'"projectOutcome3": "More and more and more free text",'
            +'"projectOutcome3Checked": true,'
            +'"projectOutcome4": "More and more and more free text",'
            +'"projectOutcome4Checked": true,'
            +'"projectOutcome5": "More and more and more free text",'
            +'"projectOutcome5Checked": true,'
            +'"projectOutcome6": "More and more and more free text",'
            +'"projectOutcome6Checked": true,'
            +'"projectOutcome7": "More and more and more free text",'
            +'"projectOutcome7Checked": false,'
            +'"projectOutcome8": "More and more and more free text",'
            +'"projectOutcome8Checked": false,'
            +'"projectOutcome9": null,'
            +'"projectOutcome9Checked": false,'
            +'"projectNeedsPermission": "yes",'
            +'"projectNeedsPermissionDetails": "more free text",'
            +'"projectCosts": ['
            +'{'
            +'"costId": "baa49446-cb70-46c7-ade1-0e17ad450c8a",'
            +'"costType": "new-staff",'
            +'"costDescription": "Free text",'
            +'"costAmount": 1000'
            +'},'
            +'{'
            +'"costId": "af1fbf6c-c4df-4fa5-abcf-fa97f43fe548",'
            +'"costType": "professional-fees",'
            +'"costDescription": "Free text",'
            +'"costAmount": 1000'
            +'}'
            +'],'
            +'"projectVolunteers": ['
            +'{'
            +'"description": "free text",'
            +'"hours": 10'
            +'},'
            +'{'
            +'"description": "more free text",'
            +'"hours": 20'
            +'}'
            +'],'
            +'"nonCashContributions": ['
            +'{'
            +'"description": "Free text",'
            +'"estimatedValue": 1000,'
            +'"secured": "yes-with-evidence"'
            +'},'
            +'{'
            +'"description": "More free text",'
            +'"estimatedValue": 2000,'
            +'"secured": "not-sure"'
            +'}'
            +'],'
            +'"cashContributions": ['
            +'{'
            +'"description": "free text",'
            +'"secured": "yes-with-evidence",'
            +'"amount": 1000,'
            +'"id": "c4237718-ced7-4d03-a95b-1eceaecfdbe0"'
            +'},'
            +'{'
            +'"description": "free text",'
            +'"secured": "no",'
            +'"amount": 1000,'
            +'"id": "cf83a007-03e7-4940-a93b-135bb65e363e"'
            +'},'
            +'{'
            +'"description": "free text",'
            +'"secured": "not-sure",'
            +'"amount": 1000,'
            +'"id": "5b43682a-0c7d-4ded-ab11-2ad248497425"'
            +'},'
            +'{'
            +'"description": "free text",'
            +'"secured": "yes-no-evidence-yet",'
            +'"amount": 1000,'
            +'"id": "ec64bc3b-c580-419a-9eba-bbce6ffc0185"'
            +'}'
            +'],'
            +'"evidenceOfSupport": ['
            +'{'
            +'"description": "free text"'
            +'},'
            +'{'
            +'"description": "more free text"'
            +'}'
            +'],'
            +'"organisationId": "c23e12e0-e69e-11e9-aaf2-2514879727cc",'
            +'"organisationName": "Acme Corp",'
            +'"organisationMission": ["black-or-minority-ethnic-led","disability-led","lgbt+-led","female-led","young-people-led"],'
            +'"organisationAddress": {'
            +'"line1": "82553 Demarco Rapid",'
            +'"townCity": "Waelchitown",'
            +'"county": "Berkshire",'
            +'"postcode": "B15 1TR"'
            +'},'
            +'"organisationType": "local-authority",'
            +'"companyNumber": "123456789",'
            +'"charityNumber": null,'
            +'"charityNumberNi": null,'
            +'"mainContactName": "Nelda",'
            +'"mainContactDateOfBirth": "1975-10-12",'
            +'"mainContactAddress": {'
            +'"line1": "41465 Bashirian Oval",'
            +'"line2": "address line 2",'
            +'"line3": "address line 3",'
            +'"county": "Berkshire",'
            +'"postcode": "B15 1TR"'
            +'},'
            +'"authorisedSignatoryOneDetails": {'
            +'"role": "trustee",'
            +'"name": "Jane Doe",'
            +'"phone": "07777 777777",'
            +'"email": "jane1@example.com",'
            +'"isAlsoApplicant": "false"'
            +'},'
            +'"authorisedSignatoryTwoDetails": {'
            +'"role": "trustee",'
            +'"name": "Jane Doe",'
            +'"phone": "07777 777777",'
            +'"email": "jane2@example.com",'
            +'"isAlsoApplicant": "false"'
            +'},'
            +'"mainContactEmail": "Lizzie87@example.com",'
            +'"mainContactPhone": "0345 4 10 20 30",'
            +'"mainContactIsAlsoSignatory": "true",'
            +'"informationNotPubliclyAvailableRequest": "more free text",'
            +'"keepInformed": false,'
            +'"involveInResearch": true,'
            +'"isPartnership": true,'
            +'"partnershipDetails": "More free text"'
            +'}'
            +'}';
        RestRequest req = new RestRequest(); 
        req.requestBody = Blob.valueof(requestBody);
        RestResponse res = new RestResponse();
        
        req.requestURI = '/services/apexrest/loadApprovals';  // sample Endpoint
        req.httpMethod = 'POST';
        RestContext.request = req;
        RestContext.response = res;
        
        PortalApplication.uploadRecords();
        //TestService.doGet();
    }

    @isTest static void testPushJson(){
        
		PortalApplication_PushJsonCtrl.uploadJson();        
    }

}